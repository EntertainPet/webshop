{% extends 'home/base.html' %}
{% load static %}

{% block title %}{{ producto.nombre }} ‚Äî EntertainPet{% endblock %}

{% block content %}
  <div class="container">
    <a href="{% url 'home:catalogo' %}" class="detalle-link">‚Üê Volver al cat√°logo</a>

    <div class="row" style="margin-top:18px;gap:18px;align-items:start">
      <div class="col-md-6">
        <div style="background:#fff;border-radius:8px;padding:8px;box-shadow:0 4px 16px rgba(0,0,0,0.06)">
          {% if producto.imagenes.first %}
            <img src="{{ producto.imagenes.first.imagen }}" alt="{{ producto.nombre }}" style="width:100%;height:480px;object-fit:cover;border-radius:6px">
          {% else %}
            <div style="width:100%;height:480px;display:flex;align-items:center;justify-content:center;font-size:72px;background:#f7f1e6;border-radius:6px;color:var(--marron-oscuro)">üñºÔ∏è</div>
          {% endif %}
        </div>
        {% if producto.descripcion %}
          <div style="margin-top:12px;background:#fff;padding:12px;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,0.04)">
            <h5 style="margin:0 0 8px;color:var(--marron-oscuro)">Descripci√≥n</h5>
            <p style="color:var(--gris);margin:0">{{ producto.descripcion }}</p>
          </div>
        {% endif %}
      </div>

      <div class="col-md-5">
        <h2 style="color:var(--marron-oscuro)">{{ producto.nombre }}</h2>
        <div style="margin:8px 0">
          <span style="font-size:1.5rem;font-weight:800;color:var(--marron-oscuro)">‚Ç¨ {{ producto.precio_final }}</span>
          {% if producto.precio_oferta %}
            <span style="text-decoration:line-through;color:#999;margin-left:8px">‚Ç¨ {{ producto.precio }}</span>
          {% endif %}
        </div>

        <div style="margin:12px 0">
          <strong style="color:var(--gris)">Categor√≠a:</strong> <span style="color:var(--marron-oscuro)">{{ producto.categoria.nombre }}</span>
        </div>

        <form action="{% url 'home:carrito_add' producto.pk %}" method="post">
          {% csrf_token %}

          {% if producto.tallas.exists %}
            <div class="field">
              <label for="talla">Talla</label>
              <select id="talla" name="talla" class="form-select">
                {% for t in producto.tallas.all %}
                  <option value="{{ t.talla }}">{{ t.talla }}{% if t.stock %} ‚Äî {{ t.stock }} disponibles{% endif %}</option>
                {% endfor %}
              </select>
            </div>
          {% endif %}

          <div class="field" style="margin-top:10px">
            <label for="cantidad">Cantidad</label>
            <input id="cantidad" name="cantidad" type="number" value="1" min="1" class="form-control" style="width:120px">
          </div>

          <div style="margin-top:14px;display:flex;gap:8px;align-items:center">
            <button type="submit" class="add-btn">A√±adir al carrito</button>
            <a href="{% url 'home:carrito' %}" class="btn btn-outline-secondary">Ver carrito</a>
          </div>
        </form>

        <div style="margin-top:18px;color:var(--gris)">
          <p><strong>SKU:</strong> {{ producto.pk }}</p>
          <p><strong>Stock:</strong> {% if producto.stock %}{{ producto.stock }} unidades{% else %}Sin stock{% endif %}</p>
        </div>

      </div>
    </div>
  </div>
{% endblock %}
