{% extends 'base.html' %}
{% load static %}

{% block title %}Checkout - EntertainPet{% endblock %}

{% block content %}
  <div class="container" style="max-width:600px;margin:40px auto;">
    <h2 style="color:var(--marron-oscuro);text-align:center;">Finalizar compra como invitado</h2>
    
    <p style="text-align:center;color:#666;margin:16px 0;">
      Ingresa tu correo electrónico para recibir la confirmación de tu pedido y el código de seguimiento.
    </p>

    {% if messages %}
      <div class="mb-4">
        {% for message in messages %}
          <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
          </div>
        {% endfor %}
      </div>
    {% endif %}

    <div style="background:#fff;padding:24px;border-radius:12px;box-shadow:0 4px 16px rgba(0,0,0,0.1);margin-top:24px;">
      <form method="post">
        {% csrf_token %}
        
        <div class="field" style="margin-bottom:20px;">
          <label for="email" style="font-weight:600;display:block;margin-bottom:8px;">Correo electrónico</label>
          <input type="email" 
                 name="email" 
                 id="email" 
                 required 
                 placeholder="tu@email.com"
                 style="width:100%;padding:12px;border:2px solid #ddd;border-radius:8px;font-size:16px;">
          <small style="color:#666;font-size:0.85rem;display:block;margin-top:6px;">
            Recibirás el código de seguimiento en este correo.
          </small>
        </div>

        <div style="background:#f7f1e6;padding:16px;border-radius:8px;margin:20px 0;">
          <h4 style="margin:0 0 12px;color:var(--marron-oscuro);font-size:1rem;">Resumen del pedido</h4>
          <div style="display:flex;justify-content:space-between;margin:8px 0;">
            <span>Subtotal:</span>
            <strong>{{ total|floatformat:2 }} €</strong>
          </div>
          <div style="display:flex;justify-content:space-between;margin:8px 0;">
            <span>Envío:</span>
            <span>4,50 €</span>
          </div>
          <hr style="border:none;border-top:1px solid #ddd;margin:12px 0;">
          <div style="display:flex;justify-content:space-between;margin:8px 0;font-size:1.1rem;">
            <strong>Total:</strong>
            <strong style="color:var(--marron-oscuro);">{{ total|floatformat:2 }} €</strong>
          </div>
        </div>

        <button type="submit" class="add-btn" style="width:100%;padding:14px;font-size:1rem;">
          Continuar al pago
        </button>

        <div style="text-align:center;margin-top:20px;">
          <p style="color:#666;font-size:0.9rem;">
            ¿Ya tienes cuenta? 
            <a href="{% url 'home:login' %}" style="color:var(--marron-oscuro);font-weight:600;text-decoration:underline;">
              Inicia sesión aquí
            </a>
          </p>
          <p style="color:#666;font-size:0.9rem;margin-top:8px;">
            ¿Quieres crear una cuenta para seguir tus pedidos? 
            <a href="{% url 'home:register' %}" style="color:var(--marron-oscuro);font-weight:600;text-decoration:underline;">
              Regístrate
            </a>
          </p>
        </div>
      </form>
    </div>
  </div>
{% endblock %}