{% extends 'adminpanel/base_admin.html' %}
{% block header %}Pedido #{{ pedido.id }}{% endblock %}

{% block content %}
<div class="card mb-4">
  <div class="card-header">
    <h4>Resumen del pedido</h4>
  </div>
  <div class="card-body">
    <p><strong>Email:</strong> {{ pedido.cliente_email }}</p>
    <p><strong>Total:</strong> {{ pedido.cantidad }} {{ pedido.divisa }}</p>
    <p><strong>Estado Pago:</strong>
      {% if pedido.status == "Paid" %}
        <span class="badge bg-success">{{ pedido.get_status_display }}</span>
      {% else %}
        <span class="badge bg-warning text-dark">{{ pedido.get_status_display }}</span>
      {% endif %}
    </p>
    <p><strong>Estado Envío:</strong>
      {% if pedido.estado_envio %}
        <span class="badge bg-info text-dark">{{ pedido.get_estado_envio_display }}</span>
      {% else %}
        <span class="text-muted">Sin asignar</span>
      {% endif %}
    </p>
    <p><strong>Código Seguimiento:</strong> {{ pedido.codigo_seguimiento|default:"-" }}</p>

    <a class="btn btn-sm btn-primary" href="{% url 'adminpanel:pedido_update_envio' pedido.id %}">
      Cambiar estado de envío
    </a>
  </div>
</div>

<div class="card">
  <div class="card-header">
    <h5>Productos del pedido</h5>
  </div>
  <div class="card-body table-responsive">
    <table class="table table-striped table-bordered table-hover align-middle">
      <thead class="table-dark">
        <tr>
          <th>Producto</th>
          <th>Talla</th>
          <th>Cantidad</th>
        </tr>
      </thead>
      <tbody>
        {% for item in items %}
        <tr>
          <td>{{ item.producto.nombre }}</td>
          <td>{{ item.talla }}</td>
          <td>{{ item.cantidad }}</td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="3" class="text-center text-muted">No hay productos en este pedido.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
